
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Mole Documentation">
      
      
      
      
        <link rel="prev" href="trigger_setup.html">
      
      
        <link rel="next" href="report_generator.html">
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.6">
    
    
      
        <title>API Usage - Mole Documentation</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.558e4712.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="css/prism.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="Black" data-md-color-accent="Light-Blue">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api-usage" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="Mole Documentation" class="md-header__button md-logo" aria-label="Mole Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Mole Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API Usage
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Mole Documentation" class="md-nav__button md-logo" aria-label="Mole Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Mole Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        About
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="getting_started.html" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" tabindex="0" aria-expanded="false">
          Configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Configuration" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="basic_config.html" class="md-nav__link">
        Basic Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="entity_states.html" class="md-nav__link">
        Entity States
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="pulsar.html" class="md-nav__link">
        Pulsar Functions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="game_clock.html" class="md-nav__link">
        Game Clock
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="scenario_scripts.html" class="md-nav__link">
        Scenario Scripts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="point_styles.html" class="md-nav__link">
        Point Styles
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="metadata_keyvalue.html" class="md-nav__link">
        Metadata Keys/Values
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="trigger_setup.html" class="md-nav__link">
        Trigger Setup
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          API Usage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="usage.html" class="md-nav__link md-nav__link--active">
        API Usage
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#poses" class="md-nav__link">
    Poses
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#events" class="md-nav__link">
    Events
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notes" class="md-nav__link">
    Notes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#images" class="md-nav__link">
    Images
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bulk-posts" class="md-nav__link">
    Bulk POSTs
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="report_generator.html" class="md-nav__link">
        Report Generator
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="maps.html" class="md-nav__link">
        Maps
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
        <label class="md-nav__link" for="__nav_7" tabindex="0" aria-expanded="false">
          Utilities
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Utilities" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Utilities
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="utilities_event_mocker.html" class="md-nav__link">
        Event Mocker
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
        <label class="md-nav__link" for="__nav_8" tabindex="0" aria-expanded="false">
          Developer
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Developer" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Developer
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="developer_debugger.html" class="md-nav__link">
        Debugger
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="developer_angular.html" class="md-nav__link">
        User Interface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="developer_angular_testing.html" class="md-nav__link">
        Angular Testing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="developer_migrations.html" class="md-nav__link">
        Migrations
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#poses" class="md-nav__link">
    Poses
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#events" class="md-nav__link">
    Events
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notes" class="md-nav__link">
    Notes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#images" class="md-nav__link">
    Images
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bulk-posts" class="md-nav__link">
    Bulk POSTs
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="api-usage"><strong>API Usage</strong><a class="headerlink" href="#api-usage" title="Permanent link">&para;</a></h1>
<p>For the API during an active test mission, we'll generally be concerned with creating one of the following: <code>Poses</code>, <code>Events</code>, <code>Notes</code>, <code>Images</code>. As opposed to the configuration which was largely done through the Django custom command, these will be created through their respective API endpoints.</p>
<h2 id="poses"><strong>Poses</strong><a class="headerlink" href="#poses" title="Permanent link">&para;</a></h2>
<p>Poses can be used to track entities during each test run. </p>
<p>Here is an example of posting a pose.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Minimal</label><label for="__tabbed_1_2">Comprehensive</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">pose_data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;lat&quot;</span><span class="p">:</span> <span class="mf">32.67</span><span class="p">,</span>
    <span class="s2">&quot;lon&quot;</span><span class="p">:</span>  <span class="o">-</span><span class="mf">117.24</span><span class="p">,</span>
    <span class="s2">&quot;entity&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/entities/alpha_1/&quot;</span><span class="p">,</span>
    <span class="s2">&quot;pose_source&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/pose_sources/1/&quot;</span><span class="p">,</span>
    <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
    <span class="s2">&quot;trial&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;http://localhost/api/poses/&quot;</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">pose_data</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;admin&quot;</span><span class="p">,</span> <span class="s2">&quot;admin&quot;</span><span class="p">))</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">pose_data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;lat&quot;</span><span class="p">:</span> <span class="mf">32.67</span><span class="p">,</span>
    <span class="s2">&quot;lon&quot;</span><span class="p">:</span>  <span class="o">-</span><span class="mf">117.24</span><span class="p">,</span>
    <span class="s2">&quot;entity&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/entities/alpha_1/&quot;</span><span class="p">,</span>
    <span class="s2">&quot;pose_source&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/pose_sources/1/&quot;</span><span class="p">,</span>
    <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
    <span class="s2">&quot;trial&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;elevation&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
    <span class="s2">&quot;heading&quot;</span><span class="p">:</span> <span class="mf">23.0</span><span class="p">,</span>
    <span class="s2">&quot;speed&quot;</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span>
    <span class="s2">&quot;velocity&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">133.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">],</span>
<span class="p">}</span>

<span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;http://localhost/api/poses/&quot;</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">pose_data</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;admin&quot;</span><span class="p">,</span> <span class="s2">&quot;admin&quot;</span><span class="p">))</span>
</code></pre></div>
</div>
</div>
</div>
<p><code>entity</code> is the entity that this pose is for.</p>
<p><code>pose_source</code> indicates what type of pose it is. This string should contain the id of a pose source.</p>
<p><code>timestamp</code> represents the datetime at which this pose happened. </p>
<p><code>trial</code> indicates which specific test run you want to associate this pose with. The same entity can have different paths through the test environment so this isolates the poses to their respective trial. This field would be assigned the trial id.</p>
<p><code>elevation</code> is an optional arbitrary float value. This could be used to represent meters from sea level or levels in a building.</p>
<p><code>heading</code> is an optional arbitrary float value. A good rule of thumb is to use <code>0.0</code> and/or <code>360.0</code> as north and go clockwise (i.e. east would be <code>90.0</code>)</p>
<p><code>speed</code> and <code>velocity</code> are both optional fields. <code>velocity</code> is an array, allowing to provide either 2D or 3D vectors. <code>speed</code> isn't automatically calculated so you'll have to manually set the scalar value. There is no validation that the <code>speed</code> field is the correct speed for the <code>velocity</code> field.</p>
<h2 id="events"><strong>Events</strong><a class="headerlink" href="#events" title="Permanent link">&para;</a></h2>
<p><code>Events</code> will be the primary mode of recording data. These will use the <code>EventTypes</code> created during the configuration and can include any other specific data and/or metadata that you wish to attach.</p>
<p>The following is an example of posting an event.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Minimal</label><label for="__tabbed_2_2">Comprehensive</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">json_to_post</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;start_datetime&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
    <span class="s2">&quot;event_type&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/event_types/1/&quot;</span><span class="p">,</span>
    <span class="s2">&quot;trial&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/trials/1/&quot;</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;http://&lt;Mole_IP&gt;/api/events/&quot;</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">json_to_post</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;admin&quot;</span><span class="p">,</span> <span class="s2">&quot;admin&quot;</span><span class="p">))</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">pose_data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;lat&quot;</span><span class="p">:</span> <span class="mf">32.67</span><span class="p">,</span>
    <span class="s2">&quot;lon&quot;</span><span class="p">:</span>  <span class="o">-</span><span class="mf">117.24</span><span class="p">,</span>
    <span class="s2">&quot;entity&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/entities/alpha_1/&quot;</span><span class="p">,</span>
    <span class="s2">&quot;pose_source&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/pose_sources/1/&quot;</span><span class="p">,</span>
    <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
    <span class="s2">&quot;trial&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">pose_post</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;http://localhost/api/poses/&quot;</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">pose_data</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;admin&quot;</span><span class="p">,</span> <span class="s2">&quot;admin&quot;</span><span class="p">))</span>
<span class="n">pose_url</span> <span class="o">=</span> <span class="n">pose_post</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;Location&#39;</span><span class="p">]</span>

<span class="n">json_to_post</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;start_datetime&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
    <span class="s2">&quot;end_datetime&quot;</span><span class="p">:</span> <span class="s2">&quot;2022-01-01T08:00:00+00:00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;event_type&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/event_types/1/&quot;</span><span class="p">,</span>
    <span class="s2">&quot;trial&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/trials/1/&quot;</span><span class="p">,</span>
    <span class="s2">&quot;start_pose&quot;</span><span class="p">:</span> <span class="n">pose_url</span><span class="p">,</span>
    <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;entity&quot;</span><span class="p">:</span> <span class="s2">&quot;usv1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;extra_info&quot;</span><span class="p">:</span> <span class="mf">25.2</span><span class="p">,</span>
        <span class="s2">&quot;list_of_important_things&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;item1&quot;</span><span class="p">,</span>
            <span class="s2">&quot;item2&quot;</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;http://&lt;Mole_IP&gt;/api/events/&quot;</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">json_to_post</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;admin&quot;</span><span class="p">,</span> <span class="s2">&quot;admin&quot;</span><span class="p">))</span>
</code></pre></div>
</div>
</div>
</div>
<p><code>start_datetime</code> and <code>end_datetime</code> should be a string in the format of ISO 8601. <code>start_datetime</code> is a required field. <code>end_datetime</code> is optional and intended for events with a duration of some kind. It can be omitted and added later or omitted entirely. </p>
<p><code>event_type</code> should be a string with the corresponding id for the event type you want to create. </p>
<p><code>trial</code> should be a string with the corresponding id for the trial you want to attach this event to.</p>
<p><code>start_pose</code> is an optional field that ties a pose to this event. Its value should be the url of a previously created pose. Currently, it is not possible to create both a pose and event in the same HTTP request. You can use this start pose field to indicate something like an interaction happening at a specific location. </p>
<p><code>metadata</code> should be a Python dictionary of relevent data and metadata about the event. If not supplied, it will default to an empty dictionary. </p>
<p>The target url should be whatever IP the Mole server is hosted on. This could be an IP or <code>http://localhost</code> if posting locally from the same host. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The crendentials used are based off the example configuration in the <a href="basic_config.html#trials">basic configuration</a>. If these have changed, make sure to use the correct username and password.</p>
</div>
<h2 id="notes"><strong>Notes</strong><a class="headerlink" href="#notes" title="Permanent link">&para;</a></h2>
<p>Notes provide an area to supplement events with free-form notes. All notes must be attached to an event. 
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">json_to_post</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;tester&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/testers/1/&quot;</span><span class="p">,</span>
    <span class="s2">&quot;note&quot;</span><span class="p">:</span> <span class="s2">&quot;Test note here&quot;</span><span class="p">,</span>
    <span class="s2">&quot;event&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/events/1/&quot;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;http://localhost/api/notes/&quot;</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">json_to_post</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;admin&quot;</span><span class="p">,</span> <span class="s2">&quot;admin&quot;</span><span class="p">))</span>
</code></pre></div></p>
<h2 id="images"><strong>Images</strong><a class="headerlink" href="#images" title="Permanent link">&para;</a></h2>
<p>Images can be useful for traceability and debugging. You can attach an image(s) to any event.
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">files</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;image&quot;</span><span class="p">:</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/directory/to/image.png&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">),</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;image_type&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/image_types/1/&quot;</span><span class="p">,</span>
    <span class="s2">&quot;event&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/events/1/&quot;</span><span class="p">,</span>
    <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;http://localhost/api/images/&quot;</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;admin&quot;</span><span class="p">,</span> <span class="s2">&quot;admin&quot;</span><span class="p">))</span>
</code></pre></div></p>
<h2 id="bulk-posts"><strong>Bulk POSTs</strong><a class="headerlink" href="#bulk-posts" title="Permanent link">&para;</a></h2>
<p>Mole also has the ability to create multiple instances for a single HTTP POST request. Currently this ability only exists for events and poses. To use this ability, simply pass a list of objects rather than a single object. This feature is useful if single posts are too slow for the level of throughput desired and increasing the number of Gunicorn/Django workers is not possible. Testing might be required to determine the optimal number of objects to post during each request. Also note that Pulsar messages will not be sent for any bulk events or poses. Any Pulsar functions that are tracking the event log will not run for these events. </p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Single instance</label><label for="__tabbed_3_2">Multiple instances</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>POST /api/events
{
    &quot;start_datetime&quot;: &lt;ISO_datetime&gt;,
    &quot;start_pose&quot;: &lt;pose_url&gt;,
    &quot;event_type&quot;: &lt;event_type_url&gt;,
    &quot;metadata&quot;: &lt;metadata&gt;,
}
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>POST /api/events
[
    {
        &quot;start_datetime&quot;: &lt;ISO_datetime&gt;,
        &quot;start_pose&quot;: &lt;pose_url&gt;,
        &quot;event_type&quot;: &lt;event_type_url&gt;,
        &quot;metadata&quot;: &lt;metadata&gt;,
    },
    {
        &quot;start_datetime&quot;: &lt;ISO_datetime&gt;,
        &quot;start_pose&quot;: &lt;pose_url&gt;,
        &quot;event_type&quot;: &lt;event_type_url&gt;,
        &quot;metadata&quot;: &lt;metadata&gt;,
    },
    {
        &quot;start_datetime&quot;: &lt;ISO_datetime&gt;,
        &quot;start_pose&quot;: &lt;pose_url&gt;,
        &quot;event_type&quot;: &lt;event_type_url&gt;,
        &quot;metadata&quot;: &lt;metadata&gt;,
    }
]
</code></pre></div>
</div>
</div>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.51d95adb.min.js"></script>
      
        <script src="js/prism.js"></script>
      
    
  </body>
</html>
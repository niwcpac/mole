
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Mole Documentation">
      
      
      
      
        <link rel="prev" href="usage.html">
      
      
        <link rel="next" href="maps.html">
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.6">
    
    
      
        <title>Report Generator - Mole Documentation</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.558e4712.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="css/prism.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="Black" data-md-color-accent="Light-Blue">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#report-generator" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="Mole Documentation" class="md-header__button md-logo" aria-label="Mole Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Mole Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Report Generator
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Mole Documentation" class="md-nav__button md-logo" aria-label="Mole Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Mole Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        About
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="getting_started.html" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" tabindex="0" aria-expanded="false">
          Configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Configuration" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="basic_config.html" class="md-nav__link">
        Basic Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="entity_states.html" class="md-nav__link">
        Entity States
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="pulsar.html" class="md-nav__link">
        Pulsar Functions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="game_clock.html" class="md-nav__link">
        Game Clock
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="scenario_scripts.html" class="md-nav__link">
        Scenario Scripts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="point_styles.html" class="md-nav__link">
        Point Styles
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="metadata_keyvalue.html" class="md-nav__link">
        Metadata Keys/Values
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="trigger_setup.html" class="md-nav__link">
        Trigger Setup
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="usage.html" class="md-nav__link">
        API Usage
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Report Generator
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="report_generator.html" class="md-nav__link md-nav__link--active">
        Report Generator
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#about-the-app" class="md-nav__link">
    About the App
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    Getting Started
  </a>
  
    <nav class="md-nav" aria-label="Getting Started">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#quickstart" class="md-nav__link">
    Quickstart
  </a>
  
    <nav class="md-nav" aria-label="Quickstart">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-graph-function" class="md-nav__link">
    Create a graph function
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#displaying-the-figure" class="md-nav__link">
    Displaying the figure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#developer-guide" class="md-nav__link">
    Developer Guide
  </a>
  
    <nav class="md-nav" aria-label="Developer Guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#building-the-report" class="md-nav__link">
    Building the Report
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-figures-via-api-endpoint" class="md-nav__link">
    Creating Figures via API Endpoint
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-figures-via-csv" class="md-nav__link">
    Creating Figures via CSV
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exporting-figures" class="md-nav__link">
    Exporting Figures
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pdf-printexport" class="md-nav__link">
    PDF Print/Export
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="maps.html" class="md-nav__link">
        Maps
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
        <label class="md-nav__link" for="__nav_7" tabindex="0" aria-expanded="false">
          Utilities
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Utilities" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Utilities
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="utilities_event_mocker.html" class="md-nav__link">
        Event Mocker
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
        <label class="md-nav__link" for="__nav_8" tabindex="0" aria-expanded="false">
          Developer
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Developer" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Developer
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="developer_debugger.html" class="md-nav__link">
        Debugger
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="developer_angular.html" class="md-nav__link">
        User Interface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="developer_angular_testing.html" class="md-nav__link">
        Angular Testing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="developer_migrations.html" class="md-nav__link">
        Migrations
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#about-the-app" class="md-nav__link">
    About the App
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    Getting Started
  </a>
  
    <nav class="md-nav" aria-label="Getting Started">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#quickstart" class="md-nav__link">
    Quickstart
  </a>
  
    <nav class="md-nav" aria-label="Quickstart">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-graph-function" class="md-nav__link">
    Create a graph function
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#displaying-the-figure" class="md-nav__link">
    Displaying the figure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#developer-guide" class="md-nav__link">
    Developer Guide
  </a>
  
    <nav class="md-nav" aria-label="Developer Guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#building-the-report" class="md-nav__link">
    Building the Report
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-figures-via-api-endpoint" class="md-nav__link">
    Creating Figures via API Endpoint
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-figures-via-csv" class="md-nav__link">
    Creating Figures via CSV
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exporting-figures" class="md-nav__link">
    Exporting Figures
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pdf-printexport" class="md-nav__link">
    PDF Print/Export
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="report-generator"><strong>Report Generator</strong><a class="headerlink" href="#report-generator" title="Permanent link">&para;</a></h1>
<p>The Report Generator is web application that utilizes the <em>Plotly Dash</em> Python Library 
to generate, print, and export meaningful data visualizations. </p>
<p>The Report Generator is ideal for:</p>
<ul>
<li>
<p>Generating data visualization to further analyze collected data with Mole.</p>
</li>
<li>
<p>Generating data visualization and analyze output as a standalone Dash app via API endpoint or CSV upload.</p>
</li>
</ul>
<h2 id="about-the-app"><strong>About the App</strong><a class="headerlink" href="#about-the-app" title="Permanent link">&para;</a></h2>
<p>This is an interactive, multi-page report that dynamically creates figures with an API endpoint data and/or CSV data. The report also incorporates custom styling to provide distinct pages for PDF printing and the ability to 
export figures to static image file formats like PNG, SVG, or PDF.</p>
<h2 id="getting-started"><strong>Getting Started</strong><a class="headerlink" href="#getting-started" title="Permanent link">&para;</a></h2>
<p>Navigate to the root directory of the project and run the following command:</p>
<p><code>$ ./ml init</code></p>
<p>The Report Generator is available at <strong><a href="http://localhost:8400">http://localhost:8400</a></strong> or 
<strong><a href="http://localhost/report">http://localhost/report</a></strong>.</p>
<div class="admonition info">
<p class="admonition-title">Tip</p>
<p>If Mole is running on separate machine, you can run the report as a standalone app using <code>./ml report</code>.
The report generator has an input box for users to enter an API endpoint manually.</p>
</div>
<h3 id="quickstart"><strong>Quickstart</strong><a class="headerlink" href="#quickstart" title="Permanent link">&para;</a></h3>
<p>Quickly get started on creating Plotly figures with the report generator.</p>
<h4 id="create-a-graph-function"><strong>Create a graph function</strong><a class="headerlink" href="#create-a-graph-function" title="Permanent link">&para;</a></h4>
<p>Navigate to <code>/data/graph_functions.py</code> and create a function with the following parameters:</p>
<p>For figures using endpoint data, the function name must start with or contain <em>api_</em>.
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">api_</span><span class="o">&lt;</span><span class="n">name_of_your_figure</span><span class="o">&gt;</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">trial</span><span class="p">,</span> <span class="n">font_color</span><span class="p">,</span> <span class="n">plot_color</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="p">):</span>
    <span class="c1"># Perform endpoint request and create plotly figure.</span>

    <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Name of Your Figure&quot;</span>
    <span class="k">if</span> <span class="n">endpoint</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">qf</span><span class="o">.</span><span class="n">api_request</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">/event_data?trial=</span><span class="si">{</span><span class="n">trial</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># If an endpoint is not provided on the UI, a default endpoint </span>
        <span class="c1"># (Mole event data endpoint) will be used.</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">qf</span><span class="o">.</span><span class="n">api_request</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">event_endpoint</span><span class="si">}</span><span class="s2">?trial=</span><span class="si">{</span><span class="n">trial</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Create a figure with the endpoint data.</span>

    <span class="c1"># Figure placeholder</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">empty_figure</span><span class="p">(</span><span class="n">font_color</span><span class="p">,</span> <span class="n">plot_color</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="s2">&quot;name_of_your_figure&quot;</span>
</code></pre></div></p>
<p>For figures using csv data, the function name must start with or contain <em>csv_</em>.
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">csv_</span><span class="o">&lt;</span><span class="n">name_of_your_figure</span><span class="o">&gt;</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">font_color</span><span class="p">,</span> <span class="n">plot_color</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="p">):</span>
    <span class="c1"># Create plotly figure. The uploaded data is accessible through parameter &#39;data&#39;.</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">()</span>
    <span class="c1"># Create a figure with the csv data.</span>

    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="s2">&quot;name_of_your_figure&quot;</span>
</code></pre></div></p>
<h4 id="displaying-the-figure"><strong>Displaying the figure</strong><a class="headerlink" href="#displaying-the-figure" title="Permanent link">&para;</a></h4>
<p>By default, the report generator comes with two pages (tabs), <em>api</em> and <em>csv</em>. To display a figure, navigate to <code>/pages</code> and select the respective page. For example, to display a figure on the <em>api</em> page:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># /pages/api.py</span>

<span class="k">def</span> <span class="nf">metric_layout</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return graph figures that uses api data endpoints.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="n">rm</span><span class="o">.</span><span class="n">create_figure</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;api_&lt;name_of_your_figure&quot;</span><span class="p">),</span> 
            <span class="n">rm</span><span class="o">.</span><span class="n">create_figure</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;api_event_bar&quot;</span><span class="p">),</span>
            <span class="n">rm</span><span class="o">.</span><span class="n">create_figure</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;api_event_timeline&quot;</span><span class="p">),</span>
        <span class="p">],</span>
        <span class="n">className</span><span class="o">=</span><span class="s2">&quot;row &quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;marginTop&quot;</span><span class="p">:</span> <span class="s2">&quot;5px&quot;</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div>
<p>Restart the report container and refresh the page to see the newly created figure.</p>
<p><img alt="" src="figures/Report_Generator.png" /></p>
<h2 id="developer-guide"><strong>Developer Guide</strong><a class="headerlink" href="#developer-guide" title="Permanent link">&para;</a></h2>
<p>Inside the <code>report_generator</code> directory, you'll find <code>app.py</code>. This is where the Report Generator (Dash app) 
is being executed. </p>
<h3 id="building-the-report"><strong><em>Building the Report</em></strong><a class="headerlink" href="#building-the-report" title="Permanent link">&para;</a></h3>
<p>The <code>/dash</code> directory contains the core components of the report.</p>
<ul>
<li>
<p><code>base.py</code> is the base class of the Dash app. The dynamic callbacks functionality are defined in this file. </p>
</li>
<li>
<p><code>report_modules.py</code> consists of reusable report UI components such as <em>dcc.Graph</em> and <em>dcc.Dropdown</em>, or a custom <em>Div</em> such as <code>html.Div()</code>.</p>
</li>
<li>
<p><code>components.py</code> contains all custom UI callback components.</p>
</li>
</ul>
<p>All data querying, analysis, and visualization are located in <code>/data</code> directory.</p>
<ul>
<li>
<p><code>graph_figures.py</code> contains functions returning <code>plotly</code> figures.</p>
</li>
<li>
<p><code>query_functions.py</code> contains a reusable endpoint request function that covert endpoint data to a <em>DataFrame</em>. All data manipulation and analysis should be done in this file as well.</p>
</li>
<li>
<p><code>utils.py</code> contains other useful data functions such as parsing CSV file.</p>
</li>
</ul>
<p>Each tab on the Report Generator has its own file in the <code>/pages</code> directory. The <code>layout.py</code> contains the functional code to load and display all of the contents for the app.</p>
<h3 id="creating-figures-via-api-endpoint"><strong><em>Creating Figures via API Endpoint</em></strong><a class="headerlink" href="#creating-figures-via-api-endpoint" title="Permanent link">&para;</a></h3>
<p>To retrieve data from an API endpoint, the following function is used:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># /data/query_functions.py</span>

<span class="k">def</span> <span class="nf">api_request</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Make an API GET-request and return endpoint data as a dataframe.&quot;&quot;&quot;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">content</span> 
        <span class="n">endpoint_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">endpoint_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">endpoint_data</span>
</code></pre></div>
<p>The parameter <code>source</code> is the endpoint. To get Mole event data, the 
<code>source</code> is <code>http://django:8000/api/event_data</code>.</p>
<div class="admonition info">
<p class="admonition-title">Note</p>
<p>The default configurations for <em>request</em> is set in <code>config.yml</code>. </p>
<p>You can also add filters to the endpoint. For example, to filter event data by 
their <code>trial_id</code>:</p>
<pre class="code"><code>source = &quot;http://django:8000/api/event_data?trial=1&quot;

is equivalent to:

source = f&quot;{event_endpoint}?trial=1&quot;
</code></pre>

<p>The <code>event_endpoint</code> is a variable set after reading the <code>config.yml</code>.</p>
<p>You can also download the endpoint data by inputting the url in your browser. More examples on Mole endpoints are found in <code>/data/csv/mole_endpoint_examples.csv</code>. The report generator also display these examples by default on a table figure that is found under the <em>CSV Upload</em> tab.</p>
</div>
<p>To create a figure using the endpoint data, the figure function name in <code>graph_functions.py</code> must start with <strong>api_</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">api_event_bar</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">trial</span><span class="p">,</span> <span class="n">font_color</span><span class="p">,</span> <span class="n">plot_color</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="p">):</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">Go</span><span class="o">.</span><span class="n">Figure</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">figure</span><span class="p">,</span> <span class="s2">&quot;name_of_figure&quot;</span>
</code></pre></div>
<p>The callback function for this figure will be created dynamically. This dynamically generated callback has the following inputs:</p>
<ul>
<li>
<p><strong>interval-component</strong>, fires the callback periodically based on the given polling interval set in <code>layout.py</code></p>
</li>
<li>
<p><strong>url</strong>, the current page based on the URL. Switching between <a href="http://localhost:8000/Report">Report</a> and <a href="http://localhost:8400/">Dashboard</a> will trigger the callback.</p>
</li>
<li>
<p><strong>endpoint-session</strong>, the string returned by the endpoint input box used for manually entering an API endpoint. This string is assigned to the <code>endpoint</code> paramter.</p>
</li>
<li>
<p><strong>trial-selector</strong>, the value returned by the trial selector used for filtering event endpoint data. This value is assigned to the <code>trial</code> parameter.</p>
</li>
</ul>
<p>The output of the callback is <code>figure</code> which is a property of the <code>Graph</code>. Whenever 
there's a change in the <em>input</em>, Dash calls the callback function constructs a figure object
from <code>graph_functions</code>, and returns it to the app.</p>
<p>To display this dynamically generated figure on the report, use <code>report_modules.create_figures()</code> on the desired page layout. 
<div class="highlight"><pre><span></span><code><span class="c1"># /pages/api.py</span>

<span class="k">def</span> <span class="nf">metric_layout</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return graph figures that uses api data endpoints.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="n">rm</span><span class="o">.</span><span class="n">create_figure</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;api_event_bar&quot;</span><span class="p">),</span>
        <span class="p">],</span>
        <span class="n">className</span><span class="o">=</span><span class="s2">&quot;row &quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;marginTop&quot;</span><span class="p">:</span> <span class="s2">&quot;5px&quot;</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div>
The <strong>id</strong> is the name of the figure function. In this example, the <strong>id</strong> is <code>api_event_bar</code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The Report Generator comes with two sample figures. You can generate random events to Mole by clicking the <code>GENERATE EVENT</code> button after entering Mole credentials on the report generator dashboard. <strong>NOTE</strong>: The events generated will be posted to the current trial on Mole, not the selected trial on the report generator.</p>
</div>
<h3 id="creating-figures-via-csv"><strong><em>Creating Figures via CSV</em></strong><a class="headerlink" href="#creating-figures-via-csv" title="Permanent link">&para;</a></h3>
<p>By default, the app will automatically upload the <code>mole_endpoint_examples.csv</code> from <code>/data/csv</code>. This can be changed by modifying the <em>DEFAULT_DATA</em>  in <code>utils.py</code>. There is also an option to upload your own file from the report dashboard.</p>
<p>To dynamically create a figure with uploaded data, the figure function name in <code>graph_functions.py</code> must start with <strong>csv_</strong>:
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">csv_table</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">font_color</span><span class="p">,</span> <span class="n">plot_color</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="p">):</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="s2">&quot;export_filename&quot;</span>
</code></pre></div></p>
<p>The dynamic callback for this CSV-figure has the following inputs:</p>
<ul>
<li>
<p><strong>url</strong>, the current page based on the URL. Switching between <a href="http://localhost/report/Print">Print</a> and <a href="http://localhost/report">Dashboard</a> will trigger the callback.</p>
</li>
<li>
<p><strong>csv-session</strong>, the data acquired from upload.</p>
</li>
<li>
<p><strong>csv-filename-session</strong>, the filename of the uploaded data.</p>
</li>
</ul>
<p>The output of the callback is <code>figure</code> which is a property of the <code>Graph</code>. Whenever 
there's a change in the <em>input</em>, Dash calls the callback function constructs a figure object
from <code>graph_functions</code>, and returns it to the app.</p>
<h3 id="exporting-figures"><strong><em>Exporting Figures</em></strong><a class="headerlink" href="#exporting-figures" title="Permanent link">&para;</a></h3>
<p>To export figures from the Report Generator, simply click the <strong>Export</strong> button on the 
dashboard. Every figure in the dashboard can be exported as long the function 
in <code>graph_functions.py</code> has the <em>export decorator</em> from <code>export.py</code>. </p>
<p>To use the <em>export decorator</em>, create the decorator:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">report_generator.data.export</span> <span class="k">as</span> <span class="nn">re</span>

<span class="n">bulk_export</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">make_bulk_exported</span><span class="p">()</span>
</code></pre></div>
<p>Then for any functions that create a figure, ensure that it can accept any number of parameters using <em>args</em> and <em>kwargs</em>. All figure functions with the same export call will be passed with the same set of parameters. Ensure all functions in <code>graph_functions.py</code> with export decorator to return a figure and title.</p>
<p>By default, there are two decorators in place:</p>
<ul>
<li>
<p><strong>bulk_export</strong>, this export decorator is used for exporting figures that uses endpoint data. It will export every figure for every trial.</p>
</li>
<li>
<p><strong>export</strong>, this export decorator is used for exporting figures that uses CSV data. </p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># /data/graph_functions.py</span>

<span class="nd">@bulk_export</span>
<span class="k">def</span> <span class="nf">example</span><span class="p">(</span><span class="n">trial</span><span class="p">,</span> <span class="n">font_color</span><span class="p">,</span> <span class="n">plot_color</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="p">):</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">()</span>

    <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Example&quot;</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
        <span class="n">title</span> <span class="o">=</span> <span class="n">title</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;example_</span><span class="si">{</span><span class="n">trial</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>
<p>All exported figures can be found in <code>report/exported_figures</code>.</p>
<h3 id="pdf-printexport"><strong><em>PDF Print/Export</em></strong><a class="headerlink" href="#pdf-printexport" title="Permanent link">&para;</a></h3>
<p>The Report Generator comes with a dedicated page that is styled specfically for PDF exporting. This page can be found at <a href="http://localhost/report/Print">http://localhost/report/Print</a>. To export the report to a PDF, simply click the <code>export</code> button on the top right corner of the page.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.51d95adb.min.js"></script>
      
        <script src="js/prism.js"></script>
      
    
  </body>
</html>
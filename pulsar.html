
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Mole Documentation">
      
      
      
      
        <link rel="prev" href="entity_states.html">
      
      
        <link rel="next" href="game_clock.html">
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.6">
    
    
      
        <title>Pulsar Functions - Mole Documentation</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.558e4712.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="css/prism.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="Black" data-md-color-accent="Light-Blue">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#apache-pulsar" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="Mole Documentation" class="md-header__button md-logo" aria-label="Mole Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Mole Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Pulsar Functions
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Mole Documentation" class="md-nav__button md-logo" aria-label="Mole Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Mole Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        About
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="getting_started.html" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3" tabindex="0" aria-expanded="true">
          Configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Configuration" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="basic_config.html" class="md-nav__link">
        Basic Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="entity_states.html" class="md-nav__link">
        Entity States
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Pulsar Functions
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="pulsar.html" class="md-nav__link md-nav__link--active">
        Pulsar Functions
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    Configuration
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fields" class="md-nav__link">
    Fields:
  </a>
  
    <nav class="md-nav" aria-label="Fields:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#py" class="md-nav__link">
    py
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#classname" class="md-nav__link">
    className
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inputs" class="md-nav__link">
    inputs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output" class="md-nav__link">
    output
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logtopic" class="md-nav__link">
    logTopic
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fqfn" class="md-nav__link">
    fqfn
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-configuration" class="md-nav__link">
    Example configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#developing-pulsar-functions" class="md-nav__link">
    Developing Pulsar Functions:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-pulsar-functions" class="md-nav__link">
    Testing Pulsar Functions:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#websockets" class="md-nav__link">
    Websockets
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="game_clock.html" class="md-nav__link">
        Game Clock
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="scenario_scripts.html" class="md-nav__link">
        Scenario Scripts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="point_styles.html" class="md-nav__link">
        Point Styles
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="metadata_keyvalue.html" class="md-nav__link">
        Metadata Keys/Values
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="trigger_setup.html" class="md-nav__link">
        Trigger Setup
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="usage.html" class="md-nav__link">
        API Usage
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="report_generator.html" class="md-nav__link">
        Report Generator
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="maps.html" class="md-nav__link">
        Maps
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
        <label class="md-nav__link" for="__nav_7" tabindex="0" aria-expanded="false">
          Utilities
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Utilities" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Utilities
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="utilities_event_mocker.html" class="md-nav__link">
        Event Mocker
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
        <label class="md-nav__link" for="__nav_8" tabindex="0" aria-expanded="false">
          Developer
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Developer" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Developer
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="developer_debugger.html" class="md-nav__link">
        Debugger
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="developer_angular.html" class="md-nav__link">
        User Interface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="developer_angular_testing.html" class="md-nav__link">
        Angular Testing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="developer_migrations.html" class="md-nav__link">
        Migrations
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    Configuration
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fields" class="md-nav__link">
    Fields:
  </a>
  
    <nav class="md-nav" aria-label="Fields:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#py" class="md-nav__link">
    py
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#classname" class="md-nav__link">
    className
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inputs" class="md-nav__link">
    inputs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output" class="md-nav__link">
    output
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logtopic" class="md-nav__link">
    logTopic
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fqfn" class="md-nav__link">
    fqfn
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-configuration" class="md-nav__link">
    Example configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#developing-pulsar-functions" class="md-nav__link">
    Developing Pulsar Functions:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-pulsar-functions" class="md-nav__link">
    Testing Pulsar Functions:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#websockets" class="md-nav__link">
    Websockets
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="apache-pulsar"><strong>Apache Pulsar</strong><a class="headerlink" href="#apache-pulsar" title="Permanent link">&para;</a></h1>
<h2 id="overview"><strong>Overview</strong><a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>Apache Pulsar is a distributed messaging framework. This is the main messaging system used for Mole. Pulsar also has support for stream processing through their service (Pulsar Functions), which we have the ability of leveraging for our use cases.</p>
<p><a href="https://pulsar.apache.org/docs/en/concepts-architecture-overview/">Architecture overview</a></p>
<p>We will be running the standalone mode which contains all the pieces of a Pulsar instance in a single Docker image.</p>
<h2 id="configuration"><strong>Configuration</strong><a class="headerlink" href="#configuration" title="Permanent link">&para;</a></h2>
<p><strong>Configuring Pulsar Functions:</strong>
Pulsar doesn't start with any Pulsar functions running. In order to run them, they need to be created in the Pulsar broker. There are three ways to deploy these functions. </p>
<ul>
<li>A Java client interface</li>
<li>the <code>pulsar-admin</code> CLI tool</li>
<li>HTTP calls to the admin REST API</li>
</ul>
<p>Of these, we will mainly be using HTTP calls and the <code>pulsar-admin</code> tool. There is a python script that will automatically post any available Pulsar functions it finds on the creation of a new Pulsar Docker container. This script, <code>pulsar/create_functions.py</code>, searches the <code>functions</code> directory for python files, assuming any python files in them to be valid Pulsar functions files and skipping over files prepended an <code>_</code>, and crafts a HTTP payload from a python dict within each Pulsar function file and posts it to the admin REST API. </p>
<p>We will only be using the Pulsar Function SDK for Python to develop these functions. This SDK provides a bigger range of functionality that is not available if we were to use the language-native interface.
Each Pulsar function file needs at minimum the following:</p>
<ul>
<li>a dict defining the configuration of the Pulsar function</li>
<li>a class that inherits from pulsar.Function that defines a process method with necessary parameters</li>
</ul>
<h3 id="fields"><strong>Fields:</strong><a class="headerlink" href="#fields" title="Permanent link">&para;</a></h3>
<p>The configuration of the Pulsar function has a number of required fields:</p>
<h4 id="py"><strong>py</strong><a class="headerlink" href="#py" title="Permanent link">&para;</a></h4>
<p>The location of the python file. Note that this is the path within the docker container. Since the files will be located at <code>/pulsar/functions/</code>, it will need to be of the form <code>/pulsar/functions/&lt;file&gt;</code>.</p>
<pre class="code"><code>&quot;py&quot;: &quot;/pulsar/functions/example_function.py&quot;
</code></pre>

<h4 id="classname"><strong>className</strong><a class="headerlink" href="#classname" title="Permanent link">&para;</a></h4>
<p>The name of the class for the pulsar function. For python, the filename is necessary but not included in the class name. The class name will be used as the default name of the function and corresponding fully qualified function name if one is not specified. The classname in this example would be <code>Example</code>.</p>
<pre class="code"><code>&quot;className&quot;: &quot;example_function.Example&quot;
</code></pre>

<h4 id="inputs"><strong>inputs</strong><a class="headerlink" href="#inputs" title="Permanent link">&para;</a></h4>
<p>This is a list of input topics for this function to monitor. The list can span multiple tenants, namespaces, and topics. However, if a regex pattern is used, all topics matching the pattern must  be in the same tenant and namespace. </p>
<pre class="code"><code>&quot;inputs&quot;: [&quot;persistent://public/default/input1&quot;]
</code></pre>

<p>There are also a number of optional fields that can be specified if necessary.</p>
<h4 id="output"><strong>output</strong><a class="headerlink" href="#output" title="Permanent link">&para;</a></h4>
<p>The output topic that any return values will be sent to. If this isn't set manually, the output topic has a default value of <code>{input topic}-{function name}-output</code></p>
<pre class="code"><code>&quot;output&quot;: &quot;persistent://public/default/output&quot;
</code></pre>

<h4 id="logtopic"><strong>logTopic</strong><a class="headerlink" href="#logtopic" title="Permanent link">&para;</a></h4>
<p>This is the topic where logs for this Pulsar function are sent.</p>
<pre class="code"><code>&quot;logTopic&quot;: &quot;persistent://public/default/log_topic&quot;
</code></pre>

<h4 id="fqfn"><strong>fqfn</strong><a class="headerlink" href="#fqfn" title="Permanent link">&para;</a></h4>
<p>This is the fully qualified function name (tenant/namespace/function_name). If not explicitly set, it will be inferred from the input topics and class name.</p>
<pre class="code"><code>&quot;fqfn&quot;: &quot;public/default/example_function&quot;
</code></pre>

<h4 id="example-configuration"><strong>Example configuration</strong><a class="headerlink" href="#example-configuration" title="Permanent link">&para;</a></h4>
<pre class="code"><code>    body = {
        &quot;fqfn&quot;: &quot;public/default/example_function&quot;,
        &quot;py&quot;: &quot;/pulsar/functions/example_function.py&quot;,
        &quot;className&quot;: &quot;example_function.Example&quot;,
        &quot;inputs&quot;: [&quot;persistent://public/default/input1&quot;],
        &quot;output&quot;: &quot;persistent://public/default/output&quot;,
        &quot;logTopic&quot;: &quot;persistent://public/default/log_topic&quot;,
    }
</code></pre>

<h2 id="developing-pulsar-functions"><strong>Developing Pulsar Functions:</strong><a class="headerlink" href="#developing-pulsar-functions" title="Permanent link">&para;</a></h2>
<p>Each Pulsar function needs to inherit from <code>pulsar.Function</code>. This gives us access to a context object that lets us have more functionality. Each function will need a <code>process</code> method.</p>
<pre class="code"><code>Function.process(self, input, context)
</code></pre>

<p><code>input</code> will be the message in bytes. <code>context</code> will provide a number of useful functions. (https://pulsar.apache.org/docs/en/functions-develop/#context)</p>
<p>This <code>process</code> method will be called for each message that comes in on the list of input topics. Any return values from this method will be sent to the output topic. Logs can be sent by using the <code>get_logger</code> method to get a logger object and calling the corresponding method (<code>info</code>, <code>debug</code>, <code>warn</code>, <code>error</code>, <code>critical</code>) on it. The messages created by these log methods are sent to the log topic, where any consumers to that topic can display it.</p>
<div class="admonition tip">
<p class="admonition-title">Note</p>
<p>The state storage functions (<code>put_state</code>, <code>get_state</code>, <code>incr_counter</code>, <code>get_counter</code>, <code>del_counter</code>) aren't available because the state service is disabled. Use Redis instead.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Note</p>
<p>If using regex input topics for Pulsar functions, it is possible for the initial messages to not be captured. When a new topic that matches the regex is created by a producer, the Pulsar function has to then create a subscription to that topic which may take up to a minute. In that timespan, any messages on that topic will be missed and not processed by the Pulsar function.
<a href="https://github.com/apache/pulsar/issues/6531">Link to Pulsar issue</a></p>
</div>
<h2 id="testing-pulsar-functions"><strong>Testing Pulsar Functions:</strong><a class="headerlink" href="#testing-pulsar-functions" title="Permanent link">&para;</a></h2>
<p>Unit testing the Pulsar functions can be done by running a custom docker-compose file.</p>
<pre class="code"><code>docker compose -f docker-compose-tests.yml up
</code></pre>

<p>This will run any tests in the <code>pulsar/tests</code> directory.</p>
<h2 id="websockets">Websockets<a class="headerlink" href="#websockets" title="Permanent link">&para;</a></h2>
<p>Pulsar provides a websocket server for clients that do not have a Pulsar library. Clients can connect to this websocket server to receive and send messages on Pulsar topics. Note that the idle timeout for the websocket is <strong>5 minutes</strong>. If expected to be idle for more than 5 minutes, the client should expect to reconnect when the websocket closes or send periodic messages to keep the websocket open.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.51d95adb.min.js"></script>
      
        <script src="js/prism.js"></script>
      
    
  </body>
</html>